<h2>Loan History</h2>

<div class="history-filters">

  <input type="text" placeholder="Search customer..."
         [(ngModel)]="searchText"
         (input)="applyFilter()">

  <select [(ngModel)]="statusFilter" (change)="applyFilter()">
    <option value="">All Status</option>
    <option>Approved</option>
    <option>Rejected</option>
  </select>

  <button class="clear-btn" (click)="clearFilter()">Clear</button>

</div>


<div class="table-wrapper">
<table>
  <thead>
    <tr>
      <th>Customer</th>
      <th>Loan</th>
      <th>Amount</th>
      <th>Tenure</th>
      <th>Status</th>
      <th>Approved On</th>
    </tr>
  </thead>

  <tbody>
  <tr *ngFor="let h of pagedLoans">
    <td>{{h.customerName}}</td>
    <td>{{h.loanType?.loanTypeName || h.loanType}}</td>
    <td>₹{{h.amount || h.loanAmount | number}}</td>
    <td>{{h.tenure || h.tenureMonths}} months</td>
    <td>
      <span class="pill"
            [ngClass]="h.status=='Approved' ? 'green' : 'red'">
            {{h.status}}
      </span>
    </td>
    <td>{{h.approvedOn || h.verifiedOn | date:'dd MMM yyyy, hh:mm a'}}</td>
  </tr>
</tbody>

</table>
<div class="pagination-bar">

  <div class="page-info">
    Items per page:
    <select [(ngModel)]="pageSize" (change)="applyFilter()">
      <option [value]="5">5</option>
      <option [value]="10">10</option>
      <option [value]="20">20</option>
    </select>
  </div>

  <div class="page-controls">
    <button (click)="prevPage()" [disabled]="page==1">⟨</button>
    <span>{{page}} / {{totalPages}}</span>
    <button (click)="nextPage()" [disabled]="page==totalPages">⟩</button>
  </div>

</div>


</div>
